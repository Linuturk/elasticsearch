---
# Advice is not to name a cluster 'elasticsearch' by default, 
# as any new nodes with a default config would join it
elasticsearch_cluster_name: 'rax.elasticsearch'
elasticsearch_node: {
  master: true,
  data: true,
  name: '{{ ansible_fqdn }}',
}

elasticsearch_index: {
  number_of_shards: 5,
  number_of_replicas: 1
}

elasticsearch_bootstrap: {
  mlockall: true,

  # Use 40% of memory for heap, ES will also use large amount of
  # direct memory allocation, hopefully ending with a total around 50%
  # of the whole available system memory 
  heapsize: '{{ (ansible_memtotal_mb*0.4)|round|int }}m', # round returns float, use int filter
}

elasticsearch_path: {
  conf: "/etc/elasticsearch",
  work: "/tmp/elasticsearch",
  logs: "/var/log/elasticsearch",
  data: "/var/lib/elasticsearch",
  plugins: "/usr/share/elasticsearch/plugins"
}

elasticsearch_network: {
  host: "{{ ansible_eth1.ipv4.address }}", # bind everything to service net
  http_host: "{{ ansible_lo.ipv4.address }}", # prefer localhost for http interfaces
  unicast_interface: 'eth1', # this will drive lookups of eth1's ipv4 addr for the host group
}

#
#  elasticsearch_transport: {
#  }
#
#  elasticsearch_http: {
#  }

     
#elasticsearch_plugin: {
#  mandatory: "a_plugin,another_plugin"
#}
